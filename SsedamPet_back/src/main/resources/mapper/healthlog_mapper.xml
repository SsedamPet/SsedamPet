<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.korit.ssedampet_back.mapper.HealthLogMapper">



    <select id="findByPetIdAndDate" resultType="com.korit.ssedampet_back.dto.response.healthlog.HealthLogRespDto">
        select
            healthlog_Id,
            pet_id,
            write_date,
            water_status,
            food_status,
            poop_cnt,
            symptom,
            healthlog_memo,
            created_dt,
            updated_dt
        from
            healthlog_tb
        where
            pet_id = #{petId}
            AND write_date = #{writeDate}
        limit 1
    </select>

    <insert id="createHealthLog">
        insert into
            healthlog_tb (
        pet_id, write_date, water_status, food_status, poop_cnt, symptom,
        healthlog_memo, created_dt, updated_dt
        ) values (
        #{petId}, #{writeDate}, #{waterStatus}, #{foodStatus}, #{poopCnt}, #{symptom},
        #{healthlogMemo}, now(), now()
        )
    </insert>

    <update id="updateHealthLog">
        update
            healthlog_tb
        set
            water_status = #{waterStatus},
            food_status = #{foodStatus},
            poop_cnt = #{poopCnt},
            symptom = #{symptom},
            healthlog_memo = #{healthlogMemo},
            updated_dt = NOW()
        where
            healthlog_id = #{healthlogId}
    </update>
</mapper>